{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/teepakorn_s/Desktop/my_cms/frontend/components/CustomCursor.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { motion, useSpring } from \"motion/react\";\n\nexport default function CustomCursor() {\n    const [mounted, setMounted] = useState(false);\n\n    // Smooth trailing effect\n    const cursorX = useSpring(0, { damping: 20, stiffness: 250 });\n    const cursorY = useSpring(0, { damping: 20, stiffness: 250 });\n\n    useEffect(() => {\n        setMounted(true);\n        const moveCursor = (e: MouseEvent) => {\n            cursorX.set(e.clientX - 16);\n            cursorY.set(e.clientY - 16);\n        };\n        window.addEventListener(\"mousemove\", moveCursor);\n        return () => window.removeEventListener(\"mousemove\", moveCursor);\n    }, [cursorX, cursorY]);\n\n    if (!mounted) return null;\n\n    return (\n        <motion.div\n            className=\"fixed top-0 left-0 w-8 h-8 rounded-full border-2 border-accent pointer-events-none z-[9999] hidden lg:block\"\n            style={{\n                x: cursorX,\n                y: cursorY,\n            }}\n        />\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAKe,SAAS;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kPAAQ,EAAC;IAEvC,yBAAyB;IACzB,MAAM,UAAU,IAAA,uNAAS,EAAC,GAAG;QAAE,SAAS;QAAI,WAAW;IAAI;IAC3D,MAAM,UAAU,IAAA,uNAAS,EAAC,GAAG;QAAE,SAAS;QAAI,WAAW;IAAI;IAE3D,IAAA,mPAAS,EAAC;QACN,WAAW;QACX,MAAM,aAAa,CAAC;YAChB,QAAQ,GAAG,CAAC,EAAE,OAAO,GAAG;YACxB,QAAQ,GAAG,CAAC,EAAE,OAAO,GAAG;QAC5B;QACA,OAAO,gBAAgB,CAAC,aAAa;QACrC,OAAO,IAAM,OAAO,mBAAmB,CAAC,aAAa;IACzD,GAAG;QAAC;QAAS;KAAQ;IAErB,IAAI,CAAC,SAAS,OAAO;IAErB,qBACI,+QAAC,qOAAM,CAAC,GAAG;QACP,WAAU;QACV,OAAO;YACH,GAAG;YACH,GAAG;QACP;;;;;;AAGZ"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/teepakorn_s/Desktop/my_cms/frontend/components/BackToTop.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { ArrowUp } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\nexport default function BackToTop() {\n    const [isVisible, setIsVisible] = useState(false);\n\n    useEffect(() => {\n        const toggleVisibility = () => {\n            if (window.scrollY > 500) {\n                setIsVisible(true);\n            } else {\n                setIsVisible(false);\n            }\n        };\n\n        window.addEventListener(\"scroll\", toggleVisibility);\n        return () => window.removeEventListener(\"scroll\", toggleVisibility);\n    }, []);\n\n    const scrollToTop = () => {\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        });\n    };\n\n    return (\n        <AnimatePresence>\n            {isVisible && (\n                <motion.button\n                    initial={{ opacity: 0, scale: 0.8, y: 20 }}\n                    animate={{ opacity: 1, scale: 1, y: 0 }}\n                    exit={{ opacity: 0, scale: 0.8, y: 20 }}\n                    onClick={scrollToTop}\n                    className=\"fixed bottom-24 right-6 z-[90] p-4 bg-primary rounded-2xl shadow-premium hover:bg-accent transition-all active:scale-95 group\"\n                    style={{ color: 'var(--primary-foreground)' }}\n                >\n                    <ArrowUp size={24} className=\"group-hover:-translate-y-1 transition-transform\" />\n                </motion.button>\n            )}\n        </AnimatePresence>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kPAAQ,EAAC;IAE3C,IAAA,mPAAS,EAAC;QACN,MAAM,mBAAmB;YACrB,IAAI,OAAO,OAAO,GAAG,KAAK;gBACtB,aAAa;YACjB,OAAO;gBACH,aAAa;YACjB;QACJ;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACtD,GAAG,EAAE;IAEL,MAAM,cAAc;QAChB,OAAO,QAAQ,CAAC;YACZ,KAAK;YACL,UAAU;QACd;IACJ;IAEA,qBACI,+QAAC,6OAAe;kBACX,2BACG,+QAAC,qOAAM,CAAC,MAAM;YACV,SAAS;gBAAE,SAAS;gBAAG,OAAO;gBAAK,GAAG;YAAG;YACzC,SAAS;gBAAE,SAAS;gBAAG,OAAO;gBAAG,GAAG;YAAE;YACtC,MAAM;gBAAE,SAAS;gBAAG,OAAO;gBAAK,GAAG;YAAG;YACtC,SAAS;YACT,WAAU;YACV,OAAO;gBAAE,OAAO;YAA4B;sBAE5C,cAAA,+QAAC,wPAAO;gBAAC,MAAM;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKjD"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/teepakorn_s/Desktop/my_cms/frontend/lib/api.ts"],"sourcesContent":["export const STRAPI_URL = process.env.NEXT_PUBLIC_STRAPI_URL || \"http://127.0.0.1:1337\";\n\nexport function getStrapiURL(path = \"\") {\n    return `${STRAPI_URL}${path}`;\n}\n\nexport function getStrapiMedia(url: string | null) {\n    if (url == null) {\n        return null;\n    }\n\n    // Return the full URL if the media is hosted on an external provider\n    if (url.startsWith(\"http\") || url.startsWith(\"//\")) {\n        return url;\n    }\n\n    // Otherwise prepend the URL path with the Strapi URL\n    return `${STRAPI_URL}${url}`;\n}\n\nexport async function fetchAPI(\n    path: string,\n    urlParamsObject = {},\n    options = {}\n) {\n    const qs = require(\"qs\");\n    const mergedOptions = {\n        headers: {\n            \"Content-Type\": \"application/json\",\n            ...(process.env.STRAPI_API_TOKEN ? { Authorization: `Bearer ${process.env.STRAPI_API_TOKEN}` } : {}),\n        },\n        ...options,\n    };\n\n    // Build request URL\n    const queryString = qs.stringify(urlParamsObject, {\n        encodeValuesOnly: true, // prettify URL\n    });\n    const requestUrl = `${getStrapiURL(\n        `/api${path}${queryString ? `?${queryString}` : \"\"}`\n    )}`;\n\n    // Trigger API call\n    try {\n        const response = await fetch(requestUrl, mergedOptions);\n\n        // Handle response\n        if (!response.ok) {\n            console.error(`API Error (${response.status}): ${response.statusText} at ${requestUrl}`);\n            const errorText = await response.text();\n            console.error(`Error details: ${errorText}`);\n            throw new Error(`API returned ${response.status}: ${response.statusText}`);\n        }\n\n        const data = await response.json();\n        return data;\n    } catch (error: any) {\n        console.error(`Fetch failed for URL: ${requestUrl}`);\n        console.error(`Error name: ${error.name}, Message: ${error.message}`);\n        // If it's our thrown custom error, re-throw it instead of hiding it\n        if (error.message.startsWith(\"API returned \")) {\n            throw error;\n        }\n        // Re-throw with more context\n        throw new Error(`Fetch failed for ${requestUrl}. Is Strapi running? Details: ${error.message}`);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,aAAa,6DAAsC;AAEzD,SAAS,aAAa,OAAO,EAAE;IAClC,OAAO,GAAG,aAAa,MAAM;AACjC;AAEO,SAAS,eAAe,GAAkB;IAC7C,IAAI,OAAO,MAAM;QACb,OAAO;IACX;IAEA,qEAAqE;IACrE,IAAI,IAAI,UAAU,CAAC,WAAW,IAAI,UAAU,CAAC,OAAO;QAChD,OAAO;IACX;IAEA,qDAAqD;IACrD,OAAO,GAAG,aAAa,KAAK;AAChC;AAEO,eAAe,SAClB,IAAY,EACZ,kBAAkB,CAAC,CAAC,EACpB,UAAU,CAAC,CAAC;IAEZ,MAAM;IACN,MAAM,gBAAgB;QAClB,SAAS;YACL,gBAAgB;YAChB,GAAI,QAAQ,GAAG,CAAC,gBAAgB,GAAG;gBAAE,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,gBAAgB,EAAE;YAAC,IAAI,CAAC,CAAC;QACvG;QACA,GAAG,OAAO;IACd;IAEA,oBAAoB;IACpB,MAAM,cAAc,GAAG,SAAS,CAAC,iBAAiB;QAC9C,kBAAkB;IACtB;IACA,MAAM,aAAa,GAAG,aAClB,CAAC,IAAI,EAAE,OAAO,cAAc,CAAC,CAAC,EAAE,aAAa,GAAG,IAAI,GACrD;IAEH,mBAAmB;IACnB,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,YAAY;QAEzC,kBAAkB;QAClB,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,QAAQ,KAAK,CAAC,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,SAAS,UAAU,CAAC,IAAI,EAAE,YAAY;YACvF,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,QAAQ,KAAK,CAAC,CAAC,eAAe,EAAE,WAAW;YAC3C,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,SAAS,UAAU,EAAE;QAC7E;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,YAAY;QACnD,QAAQ,KAAK,CAAC,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC,WAAW,EAAE,MAAM,OAAO,EAAE;QACpE,oEAAoE;QACpE,IAAI,MAAM,OAAO,CAAC,UAAU,CAAC,kBAAkB;YAC3C,MAAM;QACV;QACA,6BAA6B;QAC7B,MAAM,IAAI,MAAM,CAAC,iBAAiB,EAAE,WAAW,8BAA8B,EAAE,MAAM,OAAO,EAAE;IAClG;AACJ"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///Users/teepakorn_s/Desktop/my_cms/frontend/components/ChatWidget.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { MessageCircle, X, Send, Bot, User, Copy, Check, ThumbsUp, ThumbsDown, RotateCcw, Maximize2, Minimize2, ChevronDown } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { fetchAPI } from \"@/lib/api\";\n\ninterface Message {\n    id: string;\n    role: \"user\" | \"assistant\";\n    content: string;\n    isStreaming?: boolean;\n}\n\ninterface ChatConfig {\n    id?: number;\n    documentId?: string;\n    isEnabled: boolean;\n    welcomeMessage?: string;\n    botName?: string;\n    suggestedQuestions?: string[];\n    provider?: string;\n    primaryColor?: string;\n}\n\n// Simple markdown renderer (bold, links, lists, code)\nfunction RenderMarkdown({ text }: { text: string }) {\n    const lines = text.split(\"\\n\");\n    return (\n        <div className=\"space-y-1 text-sm leading-relaxed\">\n            {lines.map((line, i) => {\n                if (line.startsWith(\"# \")) return <p key={i} className=\"font-black text-base\">{line.slice(2)}</p>;\n                if (line.startsWith(\"## \")) return <p key={i} className=\"font-bold\">{line.slice(3)}</p>;\n                if (line.startsWith(\"- \") || line.startsWith(\"‚Ä¢ \")) {\n                    return (\n                        <div key={i} className=\"flex gap-2\">\n                            <span className=\"mt-1.5 w-1.5 h-1.5 rounded-full bg-current flex-shrink-0 opacity-60\" />\n                            <span>{formatInline(line.slice(2))}</span>\n                        </div>\n                    );\n                }\n                if (line.trim() === \"\") return <div key={i} className=\"h-1\" />;\n                return <p key={i}>{formatInline(line)}</p>;\n            })}\n        </div>\n    );\n}\n\nfunction formatInline(text: string): React.ReactNode {\n    const parts = text.split(/(\\*\\*[^*]+\\*\\*|`[^`]+`)/g);\n    return parts.map((part, i) => {\n        if (part.startsWith(\"**\") && part.endsWith(\"**\"))\n            return <strong key={i} className=\"font-black\">{part.slice(2, -2)}</strong>;\n        if (part.startsWith(\"`\") && part.endsWith(\"`\"))\n            return <code key={i} className=\"px-1.5 py-0.5 rounded-md bg-white/20 font-mono text-xs\">{part.slice(1, -1)}</code>;\n        return part;\n    });\n}\n\n// ‡∏ï‡∏±‡∏î <think>...</think> block ‡∏ó‡∏µ‡πà‡πÇ‡∏°‡πÄ‡∏î‡∏• reasoning ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏≠‡∏ö\nfunction stripThinkBlocks(text: string): string {\n    // ‡∏ï‡∏±‡∏î block ‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå\n    let result = text.replace(/<think>[\\s\\S]*?<\\/think>\\n?/g, \"\");\n    // ‡∏ï‡∏±‡∏î block ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î (‡∏Å‡∏≥‡∏•‡∏±‡∏á streaming ‡∏≠‡∏¢‡∏π‡πà)\n    result = result.replace(/<think>[\\s\\S]*/g, \"\");\n    return result.trimStart();\n}\n\nfunction CopyButton({ text }: { text: string }) {\n    const [copied, setCopied] = useState(false);\n    const handleCopy = async () => {\n        await navigator.clipboard.writeText(text);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n    };\n    return (\n        <button onClick={handleCopy} className=\"p-1.5 rounded-lg hover:bg-white/10 transition-colors opacity-0 group-hover:opacity-100\">\n            {copied ? <Check size={12} className=\"text-emerald-400\" /> : <Copy size={12} className=\"text-white/40\" />}\n        </button>\n    );\n}\n\ninterface Props {\n    domainOverride?: string;\n}\n\nexport default function ChatWidget({ domainOverride }: Props) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [isExpanded, setIsExpanded] = useState(false);\n    // Initialize with defaults to prevent widget from disappearing while loading\n    const [config, setConfig] = useState<ChatConfig | null>({\n        isEnabled: true,\n        botName: \"AI Assistant\",\n        welcomeMessage: \"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö üëã ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?\",\n        suggestedQuestions: []\n    });\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [inputValue, setInputValue] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n    const [showScrollDown, setShowScrollDown] = useState(false);\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n\n    const domain = domainOverride || (typeof window !== \"undefined\"\n        ? (window.location.port === \"3004\" ? \"pdpa.localhost\" : (window.location.port === \"3002\" ? \"localhost\" : window.location.hostname))\n        : \"localhost\");\n\n    // Fetch config\n    useEffect(() => {\n        const fetchConfig = async () => {\n            console.log(\"ü§ñ ChatBot fetching config for domain:\", domain);\n            try {\n                // ‡πÉ‡∏ä‡πâ fetchAPI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ STRAPI_URL ‡πÅ‡∏•‡∏∞ Headers ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏°‡∏≠\n                const data = await fetchAPI(`/chatbot-configs`, {\n                    filters: { domain: { $eq: domain } }\n                });\n\n                console.log(`ü§ñ ChatBot config received for ${domain}:`, data.data?.length ? \"Found\" : \"Not Found\");\n\n                if (data.data && data.data.length > 0) {\n                    const cfg: ChatConfig = data.data[0];\n                    setConfig(cfg);\n                    if (cfg.isEnabled && messages.length === 0) {\n                        setMessages([{\n                            id: \"welcome\",\n                            role: \"assistant\",\n                            content: cfg.welcomeMessage || \"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö üëã ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?\"\n                        }]);\n                    }\n                } else {\n                    console.warn(`No chatbot config found for domain: ${domain}`);\n                    // ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡πÅ‡∏ö‡∏ö default 'localhost'\n                    if (domain !== \"localhost\") {\n                        const fallback = await fetchAPI(`/chatbot-configs`, {\n                            filters: { domain: { $eq: \"localhost\" } }\n                        });\n                        if (fallback.data && fallback.data.length > 0) {\n                            console.log(\"ü§ñ ChatBot fallback to 'localhost' succeeded\");\n                            setConfig(fallback.data[0]);\n                        }\n                    }\n                }\n            } catch (err) {\n                console.error(\"ChatWidget config fetch failed:\", err);\n            }\n        };\n        fetchConfig();\n    }, [domain]);\n\n    // Auto-scroll to bottom\n    const scrollToBottom = useCallback(() => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, []);\n\n    useEffect(() => {\n        if (isOpen) scrollToBottom();\n    }, [messages, isOpen, scrollToBottom]);\n\n    // Scroll indicator\n    const handleScroll = () => {\n        if (!scrollContainerRef.current) return;\n        const { scrollTop, scrollHeight, clientHeight } = scrollContainerRef.current;\n        setShowScrollDown(scrollHeight - scrollTop - clientHeight > 60);\n    };\n\n    // Focus input when chat opens\n    useEffect(() => {\n        if (isOpen) setTimeout(() => inputRef.current?.focus(), 300);\n    }, [isOpen]);\n\n    const generateId = () => Math.random().toString(36).slice(2);\n\n    const sendMessage = async (userMsg: string) => {\n        if (!userMsg.trim() || isLoading) return;\n\n        const userMessage: Message = { id: generateId(), role: \"user\", content: userMsg.trim() };\n        const assistantId = generateId();\n        const assistantPlaceholder: Message = { id: assistantId, role: \"assistant\", content: \"\", isStreaming: true };\n\n        const updatedMessages = [...messages, userMessage];\n        setMessages([...updatedMessages, assistantPlaceholder]);\n        setInputValue(\"\");\n        setIsLoading(true);\n        scrollToBottom();\n\n        try {\n            const res = await fetch(\"/api/chat\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                    message: userMsg,\n                    history: messages.filter(m => !m.isStreaming).map(m => ({ role: m.role, content: m.content })),\n                    domain,\n                }),\n            });\n\n            if (!res.ok) throw new Error(\"Server error\");\n\n            // Handle streaming\n            const reader = res.body?.getReader();\n            const decoder = new TextDecoder();\n            let accumulated = \"\";\n\n            if (reader) {\n                while (true) {\n                    const { done, value } = await reader.read();\n                    if (done) break;\n\n                    const chunk = decoder.decode(value, { stream: true });\n                    const lines = chunk.split(\"\\n\");\n\n                    for (const line of lines) {\n                        if (line.startsWith(\"data: \")) {\n                            const data = line.slice(6);\n                            if (data === \"[DONE]\") break;\n                            try {\n                                const parsed = JSON.parse(data);\n                                if (parsed.text) {\n                                    accumulated += parsed.text;\n                                    setMessages(prev => prev.map(m =>\n                                        m.id === assistantId ? { ...m, content: accumulated, isStreaming: true } : m\n                                    ));\n                                }\n                            } catch { }\n                        }\n                    }\n                }\n            }\n\n            // Mark streaming done\n            setMessages(prev => prev.map(m =>\n                m.id === assistantId ? { ...m, content: accumulated || \"‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ\", isStreaming: false } : m\n            ));\n        } catch (err) {\n            setMessages(prev => prev.map(m =>\n                m.id === assistantId\n                    ? { ...m, content: \"‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üôè\", isStreaming: false }\n                    : m\n            ));\n        } finally {\n            setIsLoading(false);\n            setTimeout(scrollToBottom, 100);\n        }\n    };\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        sendMessage(inputValue);\n    };\n\n    const handleReset = () => {\n        setMessages([{\n            id: generateId(),\n            role: \"assistant\",\n            content: config?.welcomeMessage || \"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö üëã ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?\"\n        }]);\n    };\n\n    const chatWidth = isExpanded ? \"w-[480px]\" : \"w-[380px]\";\n    const chatHeight = isExpanded ? \"h-[680px]\" : \"h-[550px]\";\n    const suggestedQs = config?.suggestedQuestions || [];\n    const showSuggestions = messages.length <= 1 && suggestedQs.length > 0;\n\n    // Only hide if explicitly disabled by config\n    if (config?.isEnabled === false) return null;\n\n    return (\n        <div className=\"fixed bottom-6 right-6 z-[10001] font-sans\">\n            <AnimatePresence>\n                {isOpen && (\n                    <motion.div\n                        initial={{ opacity: 0, y: 24, scale: 0.94 }}\n                        animate={{ opacity: 1, y: 0, scale: 1 }}\n                        exit={{ opacity: 0, y: 24, scale: 0.94 }}\n                        transition={{ type: \"spring\", damping: 26, stiffness: 320 }}\n                        className={`bg-white ${chatWidth} ${chatHeight} rounded-[2rem] shadow-2xl border border-gray-100 flex flex-col overflow-hidden mb-4 transition-all duration-300`}\n                    >\n                        {/* Header */}\n                        <div className=\"bg-primary px-5 py-4 text-white flex justify-between items-center relative overflow-hidden flex-shrink-0\">\n                            <div className=\"absolute -top-8 -right-8 w-32 h-32 bg-white/5 rounded-full\" />\n                            <div className=\"absolute -bottom-4 -left-4 w-20 h-20 bg-white/5 rounded-full\" />\n                            <div className=\"flex items-center gap-3 relative z-10\">\n                                <div className=\"w-10 h-10 bg-white/15 rounded-xl backdrop-blur-md flex items-center justify-center border border-white/20\">\n                                    <Bot size={20} className=\"text-accent\" />\n                                </div>\n                                <div>\n                                    <h3 className=\"font-bold text-sm tracking-tight\">{config?.botName || \"AI Assistant\"}</h3>\n                                    <div className=\"flex items-center gap-1.5 mt-0.5\">\n                                        <span className=\"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse\" />\n                                        <span className=\"text-[10px] text-white/60 font-medium uppercase tracking-widest\">Online</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"flex items-center gap-1 relative z-10\">\n                                <button onClick={handleReset} title=\"‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÉ‡∏´‡∏°‡πà\" className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors text-white/60 hover:text-white\">\n                                    <RotateCcw size={15} />\n                                </button>\n                                <button onClick={() => setIsExpanded(!isExpanded)} className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors text-white/60 hover:text-white\">\n                                    {isExpanded ? <Minimize2 size={15} /> : <Maximize2 size={15} />}\n                                </button>\n                                <button onClick={() => setIsOpen(false)} className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors\">\n                                    <X size={18} />\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* Messages */}\n                        <div\n                            ref={scrollContainerRef}\n                            onScroll={handleScroll}\n                            className=\"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50/40\"\n                        >\n                            {messages.map((msg) => (\n                                <div key={msg.id} className={`flex gap-2.5 ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\n                                    {msg.role === \"assistant\" && (\n                                        <div className=\"w-7 h-7 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                                            <Bot size={14} className=\"text-primary\" />\n                                        </div>\n                                    )}\n                                    <div className={`group max-w-[82%] ${msg.role === \"user\" ? \"items-end\" : \"items-start\"} flex flex-col gap-1`}>\n                                        <div className={`p-3.5 rounded-2xl shadow-sm relative ${msg.role === \"user\"\n                                            ? \"bg-primary text-white rounded-tr-sm\"\n                                            : \"bg-white text-primary border border-gray-50 rounded-tl-sm\"\n                                            }`}>\n                                            {msg.role === \"assistant\" ? (\n                                                <RenderMarkdown text={stripThinkBlocks(msg.content) || (msg.isStreaming ? \"...\" : \"\")} />\n                                            ) : (\n                                                <p className=\"text-sm leading-relaxed\">{msg.content}</p>\n                                            )}\n                                            {msg.isStreaming && (\n                                                <span className=\"inline-flex gap-0.5 ml-1 align-middle\">\n                                                    <span className=\"w-1 h-1 bg-current rounded-full animate-bounce opacity-60\" style={{ animationDelay: \"0ms\" }} />\n                                                    <span className=\"w-1 h-1 bg-current rounded-full animate-bounce opacity-60\" style={{ animationDelay: \"150ms\" }} />\n                                                    <span className=\"w-1 h-1 bg-current rounded-full animate-bounce opacity-60\" style={{ animationDelay: \"300ms\" }} />\n                                                </span>\n                                            )}\n                                            {msg.role === \"assistant\" && !msg.isStreaming && msg.content && (\n                                                <div className=\"absolute -bottom-6 right-0 flex gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                                    <CopyButton text={stripThinkBlocks(msg.content)} />\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                    {msg.role === \"user\" && (\n                                        <div className=\"w-7 h-7 bg-accent/20 rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                                            <User size={14} className=\"text-accent\" />\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n\n                            {/* Suggested Questions */}\n                            {showSuggestions && (\n                                <div className=\"pt-2 space-y-2\">\n                                    <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest px-1\">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢</p>\n                                    {suggestedQs.map((q, i) => (\n                                        <motion.button\n                                            key={i}\n                                            initial={{ opacity: 0, x: -10 }}\n                                            animate={{ opacity: 1, x: 0 }}\n                                            transition={{ delay: i * 0.08 }}\n                                            onClick={() => sendMessage(q)}\n                                            className=\"w-full text-left px-4 py-3 bg-white border border-gray-100 rounded-2xl text-xs font-medium text-primary hover:border-accent/30 hover:bg-accent/5 transition-all shadow-sm hover:shadow-md\"\n                                        >\n                                            {q}\n                                        </motion.button>\n                                    ))}\n                                </div>\n                            )}\n\n                            <div ref={messagesEndRef} />\n                        </div>\n\n                        {/* Scroll Down Indicator */}\n                        <AnimatePresence>\n                            {showScrollDown && (\n                                <motion.button\n                                    initial={{ opacity: 0, y: 4 }}\n                                    animate={{ opacity: 1, y: 0 }}\n                                    exit={{ opacity: 0, y: 4 }}\n                                    onClick={scrollToBottom}\n                                    className=\"absolute bottom-20 right-6 w-8 h-8 bg-primary text-white rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform\"\n                                >\n                                    <ChevronDown size={16} />\n                                </motion.button>\n                            )}\n                        </AnimatePresence>\n\n                        {/* Input */}\n                        <form onSubmit={handleSubmit} className=\"p-3 bg-white border-t border-gray-50 flex gap-2 flex-shrink-0\">\n                            <input\n                                ref={inputRef}\n                                type=\"text\"\n                                value={inputValue}\n                                onChange={(e) => setInputValue(e.target.value)}\n                                placeholder=\"‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...\"\n                                disabled={isLoading}\n                                className=\"flex-1 bg-gray-50 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-primary/20 transition-all font-medium outline-none border border-transparent focus:border-primary/20 disabled:opacity-60\"\n                            />\n                            <button\n                                type=\"submit\"\n                                disabled={isLoading || !inputValue.trim()}\n                                className=\"w-11 h-11 bg-primary text-white flex items-center justify-center rounded-xl hover:bg-accent transition-all shadow-lg shadow-primary/20 disabled:opacity-40 disabled:shadow-none active:scale-95 flex-shrink-0\"\n                            >\n                                <Send size={18} />\n                            </button>\n                        </form>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            {/* FAB Toggle Button */}\n            <motion.button\n                onClick={() => setIsOpen(!isOpen)}\n                whileHover={{ scale: 1.08 }}\n                whileTap={{ scale: 0.94 }}\n                className={`w-14 h-14 rounded-full flex items-center justify-center shadow-2xl transition-colors relative ${isOpen ? \"border-2 border-gray-100\" : \"\"}`}\n                style={{\n                    backgroundColor: isOpen ? '#ffffff' : 'var(--primary-color)',\n                    color: isOpen ? 'var(--primary-color)' : 'var(--primary-foreground)'\n                }}\n            >\n                <AnimatePresence mode=\"wait\">\n                    {isOpen ? (\n                        <motion.div key=\"close\" initial={{ rotate: -90, opacity: 0 }} animate={{ rotate: 0, opacity: 1 }} exit={{ rotate: 90, opacity: 0 }} transition={{ duration: 0.15 }}>\n                            <X size={24} />\n                        </motion.div>\n                    ) : (\n                        <motion.div key=\"open\" initial={{ rotate: 90, opacity: 0 }} animate={{ rotate: 0, opacity: 1 }} exit={{ rotate: -90, opacity: 0 }} transition={{ duration: 0.15 }}>\n                            <MessageCircle size={24} />\n                        </motion.div>\n                    )}\n                </AnimatePresence>\n\n                {/* Ping indicator */}\n                {!isOpen && (\n                    <span className=\"absolute -top-0.5 -right-0.5 flex h-3.5 w-3.5\">\n                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full opacity-60\" style={{ backgroundColor: 'var(--accent-color)' }} />\n                        <span className=\"relative inline-flex rounded-full h-3.5 w-3.5\" style={{ backgroundColor: 'var(--accent-color)' }} />\n                    </span>\n                )}\n            </motion.button>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1147, "column": 0}, "map": {"version":3,"sources":["file:///Users/teepakorn_s/Desktop/my_cms/frontend/components/SiteThemeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { usePathname, useSearchParams } from \"next/navigation\";\n\n/* ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\n\nfunction hexToRGB(hex: string): string {\n    const h = hex.replace(\"#\", \"\");\n    const r = parseInt(h.substring(0, 2), 16);\n    const g = parseInt(h.substring(2, 4), 16);\n    const b = parseInt(h.substring(4, 6), 16);\n    return `${r}, ${g}, ${b}`;\n}\n\nfunction lighten(hex: string, amount: number): string {\n    const h = hex.replace(\"#\", \"\");\n    const r = Math.round(parseInt(h.substring(0, 2), 16) + (255 - parseInt(h.substring(0, 2), 16)) * amount);\n    const g = Math.round(parseInt(h.substring(2, 4), 16) + (255 - parseInt(h.substring(2, 4), 16)) * amount);\n    const b = Math.round(parseInt(h.substring(4, 6), 16) + (255 - parseInt(h.substring(4, 6), 16)) * amount);\n    return `#${r.toString(16).padStart(2, \"0\")}${g.toString(16).padStart(2, \"0\")}${b.toString(16).padStart(2, \"0\")}`;\n}\n\nfunction darken(hex: string, amount: number): string {\n    const h = hex.replace(\"#\", \"\");\n    const r = Math.round(parseInt(h.substring(0, 2), 16) * (1 - amount));\n    const g = Math.round(parseInt(h.substring(2, 4), 16) * (1 - amount));\n    const b = Math.round(parseInt(h.substring(4, 6), 16) * (1 - amount));\n    return `#${r.toString(16).padStart(2, \"0\")}${g.toString(16).padStart(2, \"0\")}${b.toString(16).padStart(2, \"0\")}`;\n}\n\nexport function applyThemeColors(primary: string, accent: string) {\n    const root = document.documentElement;\n    const accentRGB = hexToRGB(accent);\n    const primaryRGB = hexToRGB(primary);\n\n    root.style.setProperty(\"--primary-color\", primary);\n    root.style.setProperty(\"--accent-color\", accent);\n\n    root.style.setProperty(\"--accent-dark\", darken(accent, 0.2));\n    root.style.setProperty(\"--accent-light\", lighten(accent, 0.3));\n    root.style.setProperty(\"--accent-subtle\", `rgba(${accentRGB}, 0.06)`);\n    root.style.setProperty(\"--accent-glow\", `rgba(${accentRGB}, 0.14)`);\n\n    root.style.setProperty(\"--hero-gradient-from\", darken(primary, 0.1));\n    root.style.setProperty(\"--hero-gradient-to\", lighten(primary, 0.08));\n\n    root.style.setProperty(\"--badge-bg\", `rgba(${accentRGB}, 0.08)`);\n    root.style.setProperty(\"--badge-text\", accent);\n\n    root.style.setProperty(\"--glass-border\", `rgba(${primaryRGB}, 0.08)`);\n\n    root.style.setProperty(\n        \"--premium-shadow\",\n        `0 25px 60px -12px rgba(${primaryRGB}, 0.18), 0 0 40px -10px rgba(${accentRGB}, 0.08)`\n    );\n\n    root.style.setProperty(\"--shadow-glow\", `0 0 40px -10px rgba(${accentRGB}, 0.5)`);\n}\n\n/* ‚îÄ‚îÄ Component ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\n\nexport default function SiteThemeProvider({ children }: { children: React.ReactNode }) {\n    const pathname = usePathname();\n    const searchParams = useSearchParams();\n\n    useEffect(() => {\n        const port = window.location.port;\n        const siteParam = searchParams.get(\"site\");\n        const isAdminPage = pathname.startsWith(\"/admin\");\n\n        const isPDPA =\n            pathname.startsWith(\"/pdpa\") ||\n            port === \"3004\" ||\n            (isAdminPage && siteParam === \"pdpa\");\n\n        // Update data-theme attribute for CSS layer\n        document.documentElement.setAttribute(\"data-theme\", isPDPA ? \"pdpa\" : \"datagov\");\n\n        const targetDomain = isPDPA ? \"pdpa.localhost\" : \"localhost\";\n\n        /** Fetch and apply theme colours from the API */\n        const fetchTheme = async () => {\n            try {\n                const { fetchAPI } = await import(\"@/lib/api\");\n                const res = await fetchAPI(\"/site-configs\", {\n                    filters: { domain: targetDomain }\n                });\n\n                if (res.data && res.data.length > 0) {\n                    const config = res.data[0];\n                    const colors = config.themeColors;\n\n                    if (colors?.primary && colors?.accent) {\n                        applyThemeColors(colors.primary, colors.accent);\n                    }\n                }\n            } catch (err) {\n                console.error(\"Theme fetch failed:\", err);\n            }\n        };\n\n        // Initial load\n        fetchTheme();\n\n        // ‚îÄ‚îÄ Re-fetch when user switches back to this tab ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n        // This covers the case where admin saved a new theme in another tab.\n        const handleVisibilityChange = () => {\n            if (document.visibilityState === \"visible\") {\n                fetchTheme();\n            }\n        };\n        document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n        // ‚îÄ‚îÄ Re-fetch on same-page theme-updated custom event ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n        // Admin page dispatches this after a successful save when both tabs\n        // are on the same origin.\n        const handleThemeUpdated = (e: Event) => {\n            const detail = (e as CustomEvent<{ primary: string; accent: string }>).detail;\n            if (detail?.primary && detail?.accent) {\n                applyThemeColors(detail.primary, detail.accent);\n            } else {\n                fetchTheme();\n            }\n        };\n        window.addEventListener(\"theme-updated\", handleThemeUpdated);\n\n        return () => {\n            document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n            window.removeEventListener(\"theme-updated\", handleThemeUpdated);\n        };\n        // Re-run when site param changes (admin switching DataGOV ‚Üî PDPA)\n    }, [pathname, searchParams]);\n\n    return <>{children}</>;\n}\n"],"names":[],"mappings":"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"}}]
}